# SPI Protocol Design and Verification using SystemVerilog

## ğŸ§ª Project Overview

This project implements and verifies a **Serial Peripheral Interface (SPI)** protocol using SystemVerilog. It includes RTL design for both **SPI Master and SPI Slave**, along with a fully modular, class-based **testbench architecture**. The testbench follows modern verification practices using transactions, mailboxes, virtual interfaces, and event synchronization.

**EDA Playground Link** - [SPI Protocol]()

---
## ğŸ”„ SPI Protocol Overview

**SPI (Serial Peripheral Interface)** is a synchronous, full-duplex communication protocol used for short-range communication between a master and one or more slaves.

### ğŸ“Œ Key Signals
- **SCLK** â€“ Serial Clock (generated by master)
- **MOSI** â€“ Master Out Slave In (data from master to slave)
- **MISO** â€“ Master In Slave Out (data from slave to master)
- **CS / SS** â€“ Chip Select / Slave Select (activates the target slave)
<br>

![spi](https://github.com/user-attachments/assets/eb247b89-b94f-407c-a352-faba4149c9e6)

### ğŸ§  SPI Master
- Controls communication and generates the clock (SCLK).
- Selects a slave device using Chip Select (CS).
- Sends data via MOSI and optionally receives via MISO.
- Manages the timing and direction of data transfer.

### ğŸ“¦ SPI Slave
- Responds to master when selected (CS is low).
- Receives clock and data via SCLK and MOSI.
- Can return data to the master using MISO.
- Only active when selected by the master's CS line.

---

## ğŸ“Œ Features

- âœ… 12-bit SPI data communication: LSB-first transmission
- âœ… Master generates `sclk`, `cs`, and `mosi` signals
- âœ… Slave reads `mosi` data and outputs `dout` upon complete reception
- âœ… Class-based testbench components:
  - **Transaction**
  - **Generator**
  - **Driver**
  - **Monitor**
  - **Scoreboard**
- âœ… Event and mailbox-driven synchronization
- âœ… Functional coverage of SPI data transmission
- âœ… Waveform dump (`.vcd`) enabled for debug

---

## Testbench Components

| Component   | Purpose                          |
|-------------|---------------------------------|
| **Driver**  | Drive stimulus to DUT            |
| **Monitor** | Observe DUT output               |
| **Generator** | Create randomized transactions |
| **Scoreboard** | Verify data correctness        |
| **Environment** | Integrate and control all components |
| **Transaction** | Defines data for one operation |
| **Interface**   | Declare signals connecting DUT and testbench |
| **Top**         | Instantiate DUT and environment; start simulation |

---

## ğŸ› ï¸ How It Works

### ğŸ”§ Master Module
- On receiving `newd = 1`, the master begins transmitting a 12-bit value on the `mosi` line.
- The `sclk` signal is toggled every 10 main clock cycles to simulate SPI timing.
- Chip Select (`cs`) is asserted low during transmission, and high when idle.
- Data is sent **LSB first**.

### ğŸ“¥ Slave Module
- Listens to the incoming `sclk`, `cs`, and `mosi` signals.
- Reconstructs the 12-bit data serially, shifting bits in from `mosi`.
- Once all bits are received, it asserts `done` and makes the `dout` value available.

### ğŸ§ª Testbench
- Built using **SystemVerilog OOP constructs**.
- Each component operates independently and communicates via **mailboxes and events**:
  - **Generator**: Produces random transactions.
  - **Driver**: Applies inputs to the DUT and logs what was sent.
  - **Monitor**: Captures outputs from the DUT.
  - **Scoreboard**: Compares sent vs received values to check correctness.

---

## âœ”ï¸ Verification Approach
- **Transaction-Based Verification**: Uses a `transaction` class to represent stimulus data.
- **Constrained Random Testing**: Input values are randomized for better coverage.
- **Scoreboard-Based Checking**: Compares data sent (`din`) with data received (`dout`).
- **Event Synchronization**: Ensures correct handshaking between components.
- **Waveform Dumping**: Generates `.vcd` output for timing and functional debugging.

---

## Output


![Output 1]()

![Output2]()

---

## Contributors
- Sree Vishnu Varthini S, Pre-Final Year Student, Sri Eshwar College of Engineering, sreevishnuvarthini@gmail.com
